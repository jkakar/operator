// Code generated by protoc-gen-gogo.
// source: services/gcloud/gcloud.proto
// DO NOT EDIT!

/*
Package gcloud is a generated protocol buffer package.

It is generated from these files:
	services/gcloud/gcloud.proto

It has these top-level messages:
	Instance
	ListInstancesRequest
	ListInstancesResponse
*/
package main

import golang_org_x_net_context "golang.org/x/net/context"
import flag "flag"
import github_com_sr_operator_src_services_gcloud "github.com/sr/operator/src/services/gcloud"
import google_golang_org_grpc "google.golang.org/grpc"
import os "os"
import github_com_sr_operator_src_operator "github.com/sr/operator/src/operator"
import proto "github.com/gogo/protobuf/proto"
import fmt "fmt"
import math "math"

// discarding unused import operator "operator"

// Reference imports to suppress errors if they are not otherwise used.
var _ = proto.Marshal
var _ = fmt.Errorf
var _ = math.Inf

const commandName = "gcloud"

type serviceCommand struct {
	client github_com_sr_operator_src_services_gcloud.GCloudServiceClient
}

func newServiceCommand(client github_com_sr_operator_src_services_gcloud.GCloudServiceClient) *serviceCommand {
	return &serviceCommand{client}
}

func (s *serviceCommand) ListInstances() (*github_com_sr_operator_src_operator.Output, error) {
	flags := flag.NewFlagSet("ListInstances", flag.ExitOnError)
	project_id := flags.String("project_id", "", "")
	flags.Parse(os.Args[2:])
	response, err := s.client.ListInstances(
		golang_org_x_net_context.Background(),
		&github_com_sr_operator_src_services_gcloud.ListInstancesRequest{
			ProjectId: *project_id,
		},
	)
	if err != nil {
		return nil, err
	}
	return response.Output, nil
}

func (s *serviceCommand) handle(method string) (*github_com_sr_operator_src_operator.Output, error) {
	switch method {
	case "ListInstances":
		return s.ListInstances()
	default:
		return nil, fmt.Errorf("unspported method: %s", method)
	}
}

func main() {
	conn, err := google_golang_org_grpc.Dial(":3000", google_golang_org_grpc.WithInsecure())
	if err != nil {
		panic(err)
	}
	defer conn.Close()
	if len(os.Args) < 2 {
		fmt.Fprintf(os.Stderr, "Usage: %s <service> \n", commandName)
		os.Exit(1)
	}
	client := github_com_sr_operator_src_services_gcloud.NewGCloudServiceClient(conn)
	service := newServiceCommand(client)
	method := os.Args[1]
	output, err := service.handle(method)
	if err != nil {
		fmt.Fprintf(os.Stderr, "%v\n", err)
		os.Exit(1)
	}
	fmt.Fprintln(os.Stdout, output.PlainText)
}
