#   8888888b.                       888                   888    d8b
#   888   Y88b                      888                   888    Y8P
#   888    888                      888                   888
#   888   d88P 888d888 .d88b.   .d88888 888  888  .d8888b 888888 888  .d88b.  88888b.
#   8888888P"  888P"  d88""88b d88" 888 888  888 d88P"    888    888 d88""88b 888 "88b
#   888        888    888  888 888  888 888  888 888      888    888 888  888 888  888
#   888        888    Y88..88P Y88b 888 Y88b 888 Y88b.    Y88b.  888 Y88..88P 888  888
#   888        888     "Y88P"   "Y88888  "Y88888  "Y8888P  "Y888 888  "Y88P"  888  888

# This is using the :key: yml syntax to get symbol keys instead of string keys
---
<% sync_dir = "/opt/sync" %>
<% pardot_dir = "/var/www/pardot" %>
<% realtime_dir = "/opt/realtime_frontend" %>
<% workflow_dir = "/opt/workflow" %>
:sudo: sudo -u pi

:use_locking: false
:lock_location: ''

:canoe_url: https://canoe.pardot.com
:canoe_target: production
:custom_hooks: /opt/pardot/server_hooks.sh

:repos:
  :pardot:
    :key: :deploy_key
    :local_path: <%= sync_dir %>/pi
    # Directory layout:
    #  <local_path>/artifacts # S3 artifact cache
    #  <local_path>/github # Local git directory
    #  <local_path>/build # Where artifacts get expanded and built
    :remote_path: /var/www/pi/
    :remote_current_link: <%= pardot_dir %>/current
    :remote_path_choices:
      - <%= pardot_dir %>/releases/A
      - <%= pardot_dir %>/releases/B
  :node_modules:
    :key: :deploy_key
    :local_path: <%= sync_dir %>/node_modules
    :remote_path: /var/www/node_modules/
  :pithumbs:
    :key: :deploy_key
    :local_path: <%= sync_dir %>/thumbs
    :remote_path: /var/www/pithumbs/
  :realtime-frontend:
    :key: :deploy_key
    :local_path: <%= sync_dir %>/realtime_frontend
    :remote_path: <%= realtime_dir %>
    :remote_current_link: <%= realtime_dir %>/realtime-frontend
    :artifact_prefix: realtime-
    :s3_bucket: realtime-frontend
  :workflow:
    :key: :deploy_key
    :local_path: <%= sync_dir %>/workflow
    :remote_path: <%= workflow_dir %>
    :remote_current_link: <%= workflow_dir %>/current
    :artifact_prefix: realtime-
    :s3_bucket: realtime-frontend

:composer_cache_path: <%= sync_dir %>/composer_cache

:autojob_hosts: []
