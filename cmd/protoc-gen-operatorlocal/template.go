package main

import "github.com/sr/operator/generator"

var clientTemplate = generator.NewTemplate("localoperator-gen.go",
	`// Code generated by protoc-gen-operatorlocal
package {{.LocalPackageName}}

import (
	"golang.org/x/net/context"
	"google.golang.org/grpc"

	{{- range .Services}}
		"{{.ImportPath}}"
	{{- end}}
)

{{- range .Services}}
type {{.FullName}}Client struct {
	server {{.PackageName}}.{{.FullName}}Server
}
{{end}}

{{- range .Services}}
func New{{.FullName}}Client(server {{.PackageName}}.{{.FullName}}Server) {{.PackageName}}.{{.FullName}}Client {
	return &{{.FullName}}Client{server: server}
}
{{end}}

{{- range .Services}}
{{- $svc := .FullName }}
{{- $pkg := .PackageName }}
{{- range .Methods }}
func (c *{{$svc}}Client) {{camelCase .Name}}(
	ctx context.Context,
	in *{{$pkg}}.{{.Input}},
	opts ...grpc.CallOption,
) (*{{$pkg}}.{{.Output}}, error) {
	return c.{{.Name}}(ctx, in)
}
{{ end }}
{{ end }}`)
